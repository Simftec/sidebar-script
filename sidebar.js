document.addEventListener("DOMContentLoaded", function() { const sidebar = document.querySelector('.sidebar-inner'); const container = document.querySelector('.article-side'); if (!sidebar || !container) return; const offsetTop = 16; // margen superior en px window.addEventListener('scroll', function() { const sidebarHeight = sidebar.offsetHeight; const containerHeight = container.offsetHeight; const scrollTop = window.scrollY || window.pageYOffset; const containerTop = container.offsetTop; const maxScroll = containerTop + containerHeight - sidebarHeight - offsetTop; if (scrollTop + offsetTop > containerTop && scrollTop < maxScroll) { sidebar.style.position = 'fixed'; sidebar.style.top = offsetTop + 'px'; sidebar.style.width = container.offsetWidth + 'px'; } else if (scrollTop >= maxScroll) { sidebar.style.position = 'absolute'; sidebar.style.top = (containerHeight - sidebarHeight) + 'px'; sidebar.style.width = '100%'; } else { sidebar.style.position = 'static'; sidebar.style.width = '100%'; } }); window.addEventListener('resize', function() { if (sidebar.style.position === 'fixed') { sidebar.style.width = container.offsetWidth + 'px'; } }); });
